<%= stylesheet_link_tag "bar" %>
<!-- The sidebar -->

<div class="sidebar">
  <%= link_to "Your Groups", groups_path %>
  <%= link_to "Invitations", invitations_path, class: "active"%>
  <a href="#news">Tasks</a>
</div>

<!-- Page content -->
<div class="content">

<h1>Invitations</h1>

<% if @invitations.count == 0 %>
  <p>Nobody invited you, to a group yet!</p>
<% end %>

<table class="table table-borderless table-striped" style="width: 50%;">
  <tbody>
    <% @invitations.each do |invitation| %>
      <tr>
        <td>The user: <strong><%= invitation.group.user.email %></strong> has invited you to his group: <strong><%= invitation.group.name %></strong>
        <% if invitation.status == 0 %>
          <td>
            <%= form_with(model: invitation, method: "patch") do |form| %>
              <%= form.hidden_field :status, value: 1 %>
              <%= form.submit "Accept", class: "btn btn-primary" %>
            <% end %>
          </td>
          <td><%= link_to 'Deny', destroyFromGroup_invitation_path(invitation), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %></td>
        <% else %>
          <td><%= link_to 'Exit', destroyFromGroup_invitation_path(invitation), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
